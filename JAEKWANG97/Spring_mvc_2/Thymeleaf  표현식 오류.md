
타임리프(Thymeleaf)에서 `#session`과 같은 식 기본 객체의 직접 사용이 제한되는 것은 보안상의 이유와 템플릿의 가독성 및 유지보수성을 높이기 위한 조치입니다. 이러한 변경은 개발자가 직접적으로 세션 데이터에 접근하여 템플릿에 바인딩하는 것 대신, 컨트롤러에서 필요한 데이터를 명시적으로 모델에 추가하여 뷰로 전달하도록 장려합니다. 이 방식은 더 안전하고, 템플릿에서 사용되는 데이터의 출처를 명확하게 합니다.


- 직접 접근이 안되는 오류를 확인하였다.
- 강의에서는 # 을 통해 직접 접근을 하나, 버전이 높은 타임리프에서는 다른 방식으로 사용해야한다.

### 문제 예시

예전 방식에서는 타임리프 템플릿 내에서 직접적으로 세션 객체를 다음과 같이 사용할 수 있었습니다:

```html
<p>사용자 이름: <span th:text="${#session.getAttribute('username')}"></span></p>
```

이 코드는 사용자 이름을 세션에서 직접 조회하여 표시합니다. 최신 타임리프 권장사항에 따르면, 이 방식은 권장되지 않습니다.

### 해결 방안

문제를 해결하기 위해서는 컨트롤러에서 필요한 세션 데이터를 모델에 추가하고, 이 모델을 통해 뷰로 데이터를 전달해야 합니다.

#### 1단계: 컨트롤러 수정

컨트롤러에서 세션 데이터를 모델에 추가하는 예시입니다:

```java
@GetMapping("/somePage")
public String somePage(HttpSession session, Model model) {
    // 세션에서 사용자 이름을 가져옴
    String username = (String) session.getAttribute("username");
    // 모델에 사용자 이름을 추가
    model.addAttribute("username", username);
    return "somePage";
}
```

이 예시에서는 `HttpSession`을 사용하여 세션에서 사용자 이름을 가져온 후, `Model` 객체를 통해 이를 뷰로 전달하고 있습니다.

#### 2단계: 템플릿 수정

수정된 컨트롤러에 따라 템플릿에서는 모델을 통해 전달된 데이터를 사용합니다:

```html
<p>사용자 이름: <span th:text="${username}"></span></p>
```

이 방식은 컨트롤러와 뷰 사이의 명확한 계약(contract)을 정의하며, 어떤 데이터가 뷰로 전달되는지, 그리고 그 출처가 어디인지를 더 명확하게 합니다. 이는 또한 보안상의 이유로 직접적인 세션 접근을 제한함으로써, 잠재적인 취약점을 줄이는 데에도 도움이 됩니다.