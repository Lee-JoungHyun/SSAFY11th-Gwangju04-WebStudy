## 정리

- 자바스크립트 파싱에 의해서 HTML 파싱이 중단(Blocking)되는 것을 막기 위해 `async` 와 `defer` 어트리뷰트가 존재한다. 이 둘은 JS로드 시 인라인 방식이 아닌, 외부 링크 연결 방식으로만 사용할 수 있다.
- `asynce` : HTML 파싱 중 `script` 태그를 만나면 비동기적으로 자바스크립트 파일을 로드한다. 로드가 완료되면 HTML파싱을 중단하고 즉시 자바스크립트를 파싱 및 실행한다. 중단된 HTML파싱은 자바스크립트 실행이 끝나면 재개된다.
- `defer` : HTML 파싱 중 `script` 태그를 만나면 비동기적으로 자바스크립트 파일을 로드한다. 로드가 완료되더라도 HTML 파싱이 중단되지 않으며, HTML 파싱이 끝나면(DOM 생성 후) 로드해둔 자바스크립트 파일을 파싱 및 실행한다.
- `async` 의 경우 여러개의 `script` 태그를 사용하면 먼저 로드되는 순으로 실행된다. → 코드 위치에 따른 실행 순서가 보장되지 않는다.

---

자바스크립트 파싱에 의한 **DOM 생성이 중단(Blocking)되는 문제를 근본적으로 해결하기 위해** HTML5 부터 `script` 태그에 `async` 와 `defer` 어트리뷰트가 추가되었다.

`async` 와 `defer` 어트리뷰트는 다음과 같이 `src` 어트리뷰트를 통해 **외부 자바스크립트 파일을 로드하는 경우에만 사용**할 수 있다. 즉, `src` 어트리뷰트가 없는 인라인 자바스크립트에는 사용할 수 없다.

```html
<script async src="extern.js"></script>
<script defer src="extern.js"></script>
```

`async` 와 `defer` 어트리뷰트를 사용하면 **HTML 파싱과 외부 자바스크립트 파일의 로드가 비동기적(asynchronous)으로 동시에 진행**된다. 하지만 자바스크립트의 실행 시점에 차이가 있다.

## async 어트리뷰트

HTML 파싱과 외부 자바스크립트 파일의 로드가 **비동기적으로 동시에 진행**된다. **단, 자바스크립트의 파싱과 실행은 자바스크립트 파일의 로드가 완료된 직후 진행**되며, 이때 **HTML 파싱이 중단**된다.


여러 개의 `script` 태그에 `async` 어트리뷰트를 지정하면 `script` 태그의 순서와는 상관없이 로드가 완료된 자바스크립트부터 먼저 실행되므로 **순서가 보장되지 않는다.** 따라서 순서 보장이 필요한 `script` 태그에는 `async` 어트리뷰트를 지정하지 않아야 한다. `async` 어트리뷰트는 IE10 이상에서 지원된다.

## defer 어트리뷰트

`async` 어트리뷰트와 마찬가지로 HTML 파싱과 외부 자바스크립트 파일의 로드가 비동기적으로 동시에 진행된다. 단, 자바스크립트의 파싱과 실행은 HTML 파싱이 완료된 직후, 즉 DOM 생성이 완료된 직후(이때 DOMContentLoaded 이벤트가 발생한다) 진행된다. 따라서 DOM 생성이 완료된 이후 실행되어야 할 자바스크립트에 유용하다.

`async` 어트리뷰트와 마찬가지로 HTML 파싱과 외부 자바스크립트 파일의 로드가 비동기적으로 동시에 진행된다. 단, 자바스크립트의 파싱과 실행은 HTML 파싱이 완료된 직후, 즉 DOM 생성이 완료된 직후(이때 DOMContentLoaded 이벤트가 발생한다) 진행된다. 따라서 DOM 생성이 완료된 이후 실행되어야 할 자바스크립트에 유용하다.

`defer` 어트리뷰트는 IE10 이상에서 지원된다. IE6~9에서도 지원되기는 하지만 정상적으로 동작하지 않을 수 있다.
