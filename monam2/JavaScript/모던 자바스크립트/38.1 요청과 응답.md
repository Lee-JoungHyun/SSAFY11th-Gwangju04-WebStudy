# 38.1 요청과 응답

## 정리

- 브라우저가 필요로 하는 리소스들은 모두 서버에 저장되어 있다. 브라우저는 이 리소스들을 서버에 요청하고, 서버가 응답한 리소스를 파싱해서 화면을 렌더링한다.
- 주소창에 `https://naver.com` 과 같은 사이트 주소를 입력하면 URL의 호스트 이름이 DNS를 통해 IP주소로 변환되어, 해당 IP주소를 갖는 서버에 요청을 전송한다.
- 루트 요청(`naver.com/` )은 일반적으로 index.html을 응답한다. 따라서 `naver.com/` 과 `index.html` 요청은 같은 것이나 다름없다. 하위 디렉토리에 있는 파일을 요청하고 싶으면 path를 추가로 붙여서 요청하면 된다.
- 주소창을 통해서만 요청이 가능한 것은 아니다. html 페이지 내에서 자바스크립트 코드를 통해 정적/동적 데이터를 요청할 수도 있다.
- 우리는 `index.html` 이라는 파일 하나만 요청하지만, Network탭을 확인하면 다른 리소스들도 응답되는 것을 확인할 수 있다. 이는 html파일 내에 img, link(css), script 등의 태그를 확인한 브라우저의 렌더링 엔진이 서버에 그 리소스들을 요청해, html 파싱이 잠시 중단되고 해당 리소스들을 요청해 받아오는 것이다
    
    → HTML 파싱이 중단되면 페이지의 렌더링은 어떻게 되는가?
    

---

브라우저에 필요로 하는 리소스(HTML, CSS, JS, 이미지, 폰트 등의 정적 파일 또는 데이터)는 모두 서버에 위치한다. 브라우저는 서버에 이러한 리소스들을 요청(request)하고, 서버로부터 응답(response)받아 브라우저에 시각적으로 렌더링 한다.

즉, 렌더링에 필요한 리소스는 모두 서버에 존재하므로 **필요한 리소스를 서버에 요청**하고, **서버가 응답한 리소스를 파싱하여 렌더링**하는 것이다.

### 브라우저가 서버에 요청을 전송하려면?

서버에 요청을 전송하기 위해 브라우저는 **주소창**을 제공한다. 브라우저의 주소창에 URL을 입력하고 엔터키를 누르면, URL의 호스트 이름이 DNS(Domain Name System)를 통해 **IP 주소로 변환**되고 이 IP 주소를 갖는 **서버에게 요청을 전송**한다.

예를 들어, 브라우저의 주소창에 `https://naver.com` 을 입력하고 엔터 키를 누르면 **루트요청**(/, *스킴(scheme)과 호스트(host)만으로 구성된 URI*에 의한 요청)이 `naver.com` 서버로 전송된다. 루트 요청에는 명확히 리소스를 요청하는 내용이 없지만, 일반적으로 서버는 루트 요청에 대해 암묵적으로 `index.html` 을 응답하도록 기본 설정되어 있다. 즉, `https://naver.com` 은 `https://naver.com.index.html` 과 같은 요청이다.

따라서 서버는 루트 요청에 대해 서버의 루트 폴더에 존재하는 정적 파일 `index.html` 을 클라이언트(브라우저)로 응답한다. 만약 `index.html` 이 아닌 다른 정적 파일을 서버에 요청하려면 브라우저의 주소창에 `https://naver.com/assets/data/data.json` 과 같이 요청할 정적 파일의 경로(서버의 루트 폴더 기준)와 파일 이름을 URI의 호스트 뒤의 path에 기술하여 서버에 요청한다. 그러면 서버는 루트 폴더의 `assets/data` 폴더 내에 있는 정작 파일 `data.json` 을 응답할 것이다.

반드시 브라우저의 주소창을 통해 서버에게 정적 파일을 요청할 수 있는 것은 아니다. 자바스크립트를 통해 동적으로 서버에 정적/동적 데이터를 요청할 수도 있다.

요청과 응답은 개발자 도구의 Network 패널에서 확인할 수 있다. 브라우저의 주소창에 `https://naver.com` 을 입력하고 엔터 키를 눌러 서버에 루트 요청을 전송하면 Network 탭에서 `index.html(naver.com)` 뿐만 아니라 CSS, 자바스크립트, 이미지, 폰트 파일 들도 응답되는 것을 확인할 수 있다.

우리는 분명 `index.html(naver.com)` 만을 요청했는데 다른 정적 파일들은 왜 함께 응답된 것일까?

이는 브라우저의 렌더링 엔진이 HTML(index.html)을 파싱하는 도중에 외부 리소스를 로드하는 태그, 즉 CSS파일을 로드하는 `**link` 태그**, 이미지 파일을 로드하는 `**img` 태그**, 자바스크립트를 로드하는 `**script` 태그** 등을 만나면 **HTML의 파싱을 일시 중단하고 해당 리소스 파일을 서버로 요청**하기 때문이다.
